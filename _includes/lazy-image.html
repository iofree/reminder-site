<!-- 懒加载图片组件 -->
{% assign img_src = include.src %}
{% assign img_alt = include.alt | default: "" %}
{% assign img_class = include.class | default: "" %}
{% assign img_loading = include.loading | default: "lazy" %}

<img 
  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" 
  data-src="{{ img_src }}" 
  alt="{{ img_alt }}" 
  class="lazy-image {{ img_class }}" 
  loading="{{ img_loading }}"
  onload="this.classList.add('loaded')"
  onerror="this.classList.add('error')"
>

<style>
.lazy-image {
  transition: opacity 0.3s ease;
  opacity: 0;
}

.lazy-image.loaded {
  opacity: 1;
}

.lazy-image.error {
  opacity: 0.5;
  background: #f0f0f0;
}
</style>

<script>
// 简单的懒加载实现
document.addEventListener('DOMContentLoaded', function() {
  const lazyImages = document.querySelectorAll('.lazy-image');
  
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove('lazy-image');
        imageObserver.unobserve(img);
      }
    });
  });

  lazyImages.forEach(img => imageObserver.observe(img));
});
</script>